# IPグッズ在庫管理システム 要件定義書

## 1. プロジェクト概要

### 1.1 目的
キャラクターグッズ（IPグッズ）の在庫管理を効率化し、人為的ミスの削減、リアルタイムでの在庫把握、適切な在庫量の維持を実現する業務アプリケーションの開発。

### 1.2 背景
- 手作業による在庫管理では人為的ミスが頻発
- リアルタイムでの在庫確認が困難
- 限定グッズ特有の管理項目（製造数、販売地域、権利情報等）への対応が必要
- 複数拠点間での情報共有の遅延

### 1.3 対象ユーザー
- 在庫管理担当者
- 倉庫作業員
- 営業担当者
- 管理者/マネージャー

## 2. 機能要件

### 2.1 物品管理機能

#### 2.1.1 物品登録
- **必須項目**
  - 商品名
  - SKU（商品コード）
  - 在庫数
  - 保管場所
  - カテゴリー
  - 登録日時
  - 登録者情報

- **任意項目（詳細情報）**
  - 製造数
  - 販売可能地域（日本、中国、韓国、アメリカ、フランスから複数選択）
  - 販売可能期間（開始日/終了日）
  - 権利者情報（版元、ライセンシー）
  - 製造会社情報
  - 商品画像（最大5枚）

- **登録時の仕様**
  - 在庫は全て「正常在庫」として登録される
  - 在庫数のみ管理（初期在庫数、最小在庫数は管理しない）

#### 2.1.2 物品検索・一覧表示
- 複数条件での検索（商品名、SKU、カテゴリー、保管場所等）
- ソート機能（登録日、数量、期限等）
- フィルタリング機能
- ページネーション

#### 2.1.3 物品情報更新
- 全項目の編集機能
  - 在庫状態別数量（正常/中古/破損）の変更
  - 保管場所の変更
  - 詳細情報の変更
  - 中古品・破損品の写真管理
- 変更履歴の記録
- 一括更新機能
- 最終更新者・更新日時の自動記録
- **編集時の仕様**
  - 総在庫数 = 正常在庫 + 中古在庫 + 破損在庫
  - 状態別在庫数は編集画面で個別に入力
  - 中古品・破損品それぞれに写真を添付可能

#### 2.1.4 入力者情報管理
- **登録者情報**
  - 登録者名（ユーザー名）
  - 登録日時の記録
- **最終更新者情報**
  - 最終更新者名（ユーザー名）
  - 最終更新日時の記録
- **表示仕様**
  - 物品詳細画面で登録者・最終更新者情報を表示
  - 基本的に最終更新者情報を目立つように表示
  - 登録後に一度も更新されていない場合は登録者情報のみ表示

### 2.2 QRコード・バーコード機能

#### 2.2.1 コード生成
- 物品登録時の自動生成
- 手動での再生成
- 複数形式対応（QRコード、CODE128、EAN等）
- ラベル印刷機能

#### 2.2.2 コード読取
- カメラでのスキャン機能
- バーコードリーダー対応
- 連続スキャン対応

### 2.3 入出庫管理

#### 2.3.1 入庫処理
- QRコード/バーコードスキャンによる入庫
- 手動入庫入力
- 入庫数量の自動反映
- 入庫理由の記録（仕入れ、返品、移動等）
- **在庫状態の選択**（正常/中古/破損）
- 状態別在庫数への自動反映

#### 2.3.2 出庫処理
- QRコード/バーコードスキャンによる出庫
- 手動出庫入力
- 出庫先情報の記録
- 販売委託ステータスの管理
- **在庫状態の選択**（正常/中古/破損）
- 状態別在庫数からの自動減算

#### 2.3.3 履歴管理
- 入出庫履歴の照会
- CSVエクスポート機能
- 期間指定での検索

### 2.4 在庫確認機能

#### 2.4.1 リアルタイム在庫表示
- 現在庫数の表示
- 在庫推移グラフ
- 拠点別在庫表示

#### 2.4.2 棚卸し機能
- バッチスキャンによる棚卸し
- 理論在庫と実在庫の差異表示
- 棚卸し結果の確定処理

### 2.5 アラート機能

#### 2.5.1 期限アラート（販売期限のみ）
- 販売期限切れアラート（赤色表示、エラー）
- 期限切れ直近アラート（黄色表示、警告：期限まで30日以内）
- 事前通知日数は30日で固定

#### 2.5.2 アラート表示
- ダッシュボードに販売期限に関するアラートのみ表示
- ヘッダーの通知アイコンをクリックすると詳細を表示
  - アラートの種類に応じたアイコン（警告：⚠️、エラー：🔴）
  - 各通知をクリックすると該当商品の詳細画面に遷移
  - 通知作成日時を表示

#### 2.5.3 通知方法
- アプリ内通知のみ（在庫数アラートは廃止）
- メール通知、プッシュ通知は対象外

### 2.6 ユーザー管理

#### 2.6.1 ユーザー登録・認証
- ユーザー登録機能
- ログイン/ログアウト
- パスワードリセット
- 2段階認証（オプション）

#### 2.6.2 権限管理
- ロールベースのアクセス制御
  - 管理者：全機能アクセス可能
  - 在庫管理者：入出庫、在庫確認、物品登録
  - 閲覧者：在庫確認のみ
- 拠点別アクセス制限

### 2.7 申し送り機能

#### 2.7.1 メモ機能
- 物品ごとのメモ追加
- 画像添付機能
- 破損状況の記録
- タイムスタンプ付き履歴

#### 2.7.2 担当者間連携
- 担当者変更履歴
- 引き継ぎ事項の記録
- コメント機能

### 2.8 マスターデータ管理

#### 2.8.1 版元マスタ
- 版元の登録・編集・削除
- 版元名、連絡先情報の管理
- 物品登録・編集時にドロップダウンで選択

#### 2.8.2 ライセンシーマスタ
- ライセンシーの登録・編集・削除
- ライセンシー名、連絡先情報の管理
- 物品登録・編集時にドロップダウンで選択

#### 2.8.3 製造会社マスタ
- 製造会社の登録・編集・削除
- 製造会社名、連絡先情報の管理
- 物品登録・編集時にドロップダウンで選択

#### 2.8.4 カテゴリマスタ
- カテゴリの登録・編集・削除
- カテゴリ名の管理
- 物品登録・編集時にドロップダウンで選択

#### 2.8.5 保管場所マスタ
- 保管場所の登録・編集・削除
- 保管場所名、場所コードの管理
- 物品登録・編集時にドロップダウンで選択

## 3. 非機能要件

### 3.1 パフォーマンス要件
- ページ読み込み時間：3秒以内
- 検索レスポンス：2秒以内
- 同時接続ユーザー数：100人以上
- データ保存期間：最低5年

### 3.2 可用性要件
- 稼働率：99.5%以上（年間）
- 計画メンテナンス：月1回、深夜帯2時間以内
- バックアップ：日次自動バックアップ

### 3.3 セキュリティ要件
- HTTPS通信の必須化
- パスワード強度の設定
- セッション管理
- 操作ログの記録
- 個人情報の暗号化

### 3.4 ユーザビリティ要件
- レスポンシブデザイン（PC/タブレット/スマートフォン対応）
- 直感的なUI
- オフライン対応（基本機能）
- 多言語対応（日本語必須、英語オプション）

### 3.5 拡張性要件
- API設計によるシステム連携対応
- プラグイン機構
- カスタムフィールドの追加機能

### 3.6 運用・保守要件
- ログ出力機能
- 監視機能
- データエクスポート/インポート機能
- マスタデータメンテナンス画面

## 4. 制約事項

### 4.1 技術的制約
- ブラウザ対応：Chrome、Safari、Edge、Firefox（各最新版）
- モバイルOS：iOS 14以上、Android 10以上
- データベース：PostgreSQL推奨

### 4.2 業務的制約
- 既存システムとのデータ連携が必要な場合は、CSV形式でのインポート/エクスポートで対応
- 権利情報の管理は日本の法令に準拠

## 5. 前提条件
- インターネット接続環境（オフライン時は一部機能のみ）
- QRコード/バーコード読取用のカメラまたはスキャナー
- ラベルプリンター（QRコード印刷用）

## 6. 用語定義
- **IP（Intellectual Property）**: 知的財産権、キャラクター等の権利
- **SKU（Stock Keeping Unit）**: 在庫管理単位、商品コード
- **版元**: キャラクター等の権利を持つ企業・団体
- **ライセンシー**: 版元から権利の使用許諾を受けた企業
- **棚卸し**: 実際の在庫数を確認する作業
